## REDIS学习相关代码  

## 一、redis实现消息队列
> 1.点对点 push/pop：一条消息只能被一个消费者接受 RedisQueueTest
> 2.发布订阅 pub/sub

---

## 二、自己实现心跳检测
#### 2.1 2种可实现的方式
> 1.轮询机制:服务端定时主动的去与要监控状态的客户端,客户端没有返回或返回错误、失效信息、则认为客户端已经宕机。  
> 2.心跳机制:服务端保存所有客户端的状态信息，然后等待客户端定时来访问服务端，更新当前状态,如果客户端超过指定的时间没有来更新状态，则认为客户端已经宕机或者其状态异常。   

采用的是心跳，这样一是避免服务端的压力，二是灵活好控制

#### 2.2 实现思路
客户端启动后，带着自己的标识符与服务端建立socket连接，服务端缓存下来对应信息，然后在通过socket流，定时发送当前信息消息到服务端某个接口，服务端收到后更新当前的客户端
的状态，比如（会话地址，标识符，网络的活跃状态，连接时间，心跳时间），本次来更新的时间就是心跳时间，然后服务端还有一个定时器，定时检查所有缓存的客户端会话集合，将其中
心跳时间与当前时间进行对比，如果超过指定的时间还没有来更新则认为该客户端的网络出现异常或者宕机，然后更新该客户端的网络状态。
---



